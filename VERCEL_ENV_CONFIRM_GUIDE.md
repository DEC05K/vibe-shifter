# Vercelの環境変数の環境確認方法

## ステップ3-2: 環境を確認する方法

### 手順1: 環境変数の編集画面を開く

1. **Vercelダッシュボードにアクセス**
   - https://vercel.com にログイン
   - プロジェクト `delivery-gift-lite` を選択

2. **環境変数の設定画面を開く**
   - 「Settings」> 「Environment Variables」を開く

3. **`DATABASE_URL`を編集**
   - `DATABASE_URL`の行を見つける
   - 右側の「...」メニュー（3つの点）をクリック
   - 「Edit」を選択

### 手順2: 環境の確認方法

環境変数の編集画面が開くと、**「Environment」**というセクションが表示されます。

このセクションには、以下の3つのチェックボックスがあります：

1. **Production** - 本番環境（通常のデプロイ）
2. **Preview** - プレビュー環境（プルリクエストなど）
3. **Development** - 開発環境（`vercel dev`コマンドで使用）

### 手順3: すべての環境に適用する（推奨）

**推奨設定**: 3つすべてにチェックを入れる

- ✅ **Production** にチェック
- ✅ **Preview** にチェック
- ✅ **Development** にチェック

これにより、すべての環境で同じデータベース接続文字列が使用されます。

### 手順4: 環境変数の値を設定

1. **「Value」欄に接続文字列を入力**
   ```
   postgresql://postgres:Blessinghamlet_315%2B@db.jhgszqygorqgqmovijzh.supabase.co:5432/postgres
   ```

2. **「Save」ボタンをクリック**

### 手順5: 確認方法

環境変数を保存した後、以下の方法で確認できます：

#### 方法1: 環境変数の一覧画面で確認

1. **「Environment Variables」画面に戻る**
2. **`DATABASE_URL`の行を確認**
3. **「Environment」列に表示されているアイコンを確認**
   - 🌐 アイコン: Production
   - 🔍 アイコン: Preview
   - 💻 アイコン: Development
   - すべてのアイコンが表示されていれば、すべての環境に適用されています

#### 方法2: 各環境のデプロイで確認

1. **「Deployments」タブを開く**
2. **各デプロイの「...」メニューから「View Build Logs」を選択**
3. **環境変数が正しく読み込まれているか確認**

## よくある質問

### Q1: どの環境に適用すべきですか？

**A**: 通常は、**すべての環境（Production、Preview、Development）に適用**することを推奨します。

理由：
- すべての環境で同じデータベースを使用することで、一貫性が保たれます
- 開発環境でも本番環境と同じデータベース構造をテストできます

### Q2: 環境ごとに異なるデータベースを使用したい場合は？

**A**: 環境変数を複数作成するか、環境ごとに異なる値を設定できます。

例：
- Production: 本番用のデータベース
- Preview: テスト用のデータベース
- Development: 開発用のデータベース

ただし、今回の場合は、すべて同じSupabaseプロジェクトを使用することを推奨します。

### Q3: 環境変数を変更した後、どうすれば反映されますか？

**A**: 環境変数を変更した後は、**必ず再デプロイ**してください。

1. 「Deployments」タブを開く
2. 最新のデプロイの「...」メニューから「Redeploy」を選択
3. 「Use existing Build Cache」のチェックを外す（推奨）
4. 「Redeploy」をクリック

## まとめ

1. ✅ **環境変数の編集画面で「Environment」セクションを確認**
2. ✅ **Production、Preview、Developmentすべてにチェックを入れる（推奨）**
3. ✅ **「Save」ボタンをクリック**
4. ✅ **環境変数の一覧画面で、すべての環境に適用されているか確認**
5. ✅ **環境変数を変更した後、必ず再デプロイ**

**最も重要なのは、すべての環境に適用されていることを確認することです。**



